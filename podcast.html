<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cr칩nicas de Perfummia - Rose</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800;900&family=Manrope:wght@300;500;700;800&family=Playfair+Display:ital,wght@0,700;1,600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* =========================================
           1. ESTILOS DEL HEADER (Heredados)
           ========================================= */
        :root {
            --color-dark: #1A1B2F;
            --color-accent: #FF4D80;
            --color-accent-hover: #E03666;
            --font-header: 'Montserrat', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        /* El body tiene el fondo rosa del podcast */
        body {
            font-family: 'Manrope', sans-serif;
            background: linear-gradient(135deg, #ffeef2 0%, #ffd1dc 100%);
            min-height: 100vh;
            color: #1A1A2E;
            overflow-x: hidden;
        }

        /* Navbar Styles */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 5%;
            position: absolute;
            width: 100%;
            z-index: 1000;
            top: 0;
            font-family: var(--font-header); /* Usa Montserrat solo en el men칰 */
        }

        .logo { font-size: 1.5rem; font-weight: 900; color: var(--color-dark); }
        
        .nav-links { display: flex; align-items: center; }
        .nav-links a { margin-left: 2rem; font-weight: 600; color: var(--color-dark); text-decoration: none; transition: color 0.3s; }
        .nav-links a:hover { color: var(--color-accent); }

        /* Bot칩n del men칰 */
        .btn-outline-nav {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            background: transparent;
            border: 2px solid var(--color-dark);
            color: var(--color-dark);
            cursor: pointer;
            margin-left: 2rem;
        }
        .btn-outline-nav:hover { background: var(--color-dark); color: white; }

        /* Responsive del Nav */
        @media (max-width: 900px) {
            nav { flex-direction: column; gap: 1rem; padding: 1rem; position: relative; background: rgba(255,255,255,0.5); backdrop-filter: blur(10px); }
            .nav-links { margin: 0; justify-content: center; flex-wrap: wrap; gap: 1rem; width: 100%; }
            .nav-links a { margin: 0; font-size: 0.9rem; }
            .btn-outline-nav { margin-left: 0; }
        }

        /* =========================================
           2. ESTILOS DEL PLAYER (Podcast)
           ========================================= */
        :root {
            --glass-bg: rgba(255, 255, 255, 0.95);
            --primary: #800020;
            --primary-dark: #4a0012;
            --text-main: #1A1A2E;
            --text-muted: #6b6b80;
            --white: #ffffff;
        }

        /* Contenedor para centrar el player debajo del nav */
        .main-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 100px 20px 40px 20px; /* Padding top extra para el navbar absolute */
        }

        .player-card {
            display: flex;
            width: 100%;
            max-width: 900px;
            height: 600px; /* Altura fija para escritorio */
            background: var(--glass-bg);
            border-radius: 25px;
            box-shadow: 0 20px 50px rgba(128, 0, 32, 0.15);
            overflow: hidden;
            position: relative;
        }

        /* --- IZQUIERDA --- */
        .left-section {
            width: 40%;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 30px;
            color: var(--white);
            /* Imagen de fondo del personaje */
            background: linear-gradient(to bottom, rgba(43, 16, 35, 0.4), rgba(128, 0, 32, 0.9)), url('https://i.imgur.com/SmNmnr6.png'); 
            background-size: cover;
            background-position: center top;
        }

        .album-header { display: flex; justify-content: space-between; align-items: center; z-index: 2; }
        
        .tag {
            background: rgba(255,255,255,0.2);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 700;
            letter-spacing: 1px;
            border: 1px solid rgba(255,255,255,0.3);
            text-transform: uppercase;
            backdrop-filter: blur(5px);
        }

        .art-content { z-index: 2; text-align: center; margin-bottom: 20px; }

        .big-icon {
            font-size: 32px;
            color: rgba(255,255,255,0.9);
            margin-bottom: 8px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        h1.main-title {
            font-family: 'Playfair Display', serif;
            font-size: 42px;
            line-height: 0.9;
            margin-bottom: 5px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
        }

        .subtitle { 
            font-size: 11px; opacity: 0.9; letter-spacing: 2px; font-weight: 400;
            text-transform: uppercase; text-shadow: 1px 1px 4px rgba(0,0,0,0.5);
        }

        /* --- DERECHA --- */
        .right-section {
            width: 60%;
            padding: 30px 40px;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow-y: auto; /* Scroll interno para la derecha */
        }
        .right-section::-webkit-scrollbar { width: 4px; }
        .right-section::-webkit-scrollbar-thumb { background: #eee; border-radius: 4px; }

        .top-nav { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .nav-icons { display: flex; gap: 10px; }
        
        .nav-btn {
            background: white; border: none; width: 30px; height: 30px;
            border-radius: 50%; cursor: pointer; color: var(--text-main);
            box-shadow: 0 3px 8px rgba(0,0,0,0.05); transition: transform 0.2s; font-size: 12px;
        }
        .nav-btn:hover { transform: scale(1.1); }

        .community-stats {
            display: flex; align-items: center; gap: 15px;
            font-size: 11px; font-weight: 600; color: var(--text-muted);
        }

        .stat-item { display: flex; align-items: center; gap: 5px; }
        .stat-item i { color: var(--primary); }

        .follow-btn {
            background: transparent; border: 1px solid var(--primary); color: var(--primary);
            padding: 5px 15px; border-radius: 20px; font-size: 10px; font-weight: 800;
            cursor: pointer; transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 0.5px;
        }
        .follow-btn:hover { background: #fbeeff; }
        .follow-btn.following { background: var(--primary); color: white; }

        /* Info Track */
        .track-info-container { text-align: left; margin-bottom: 5px; }
        .current-label { font-size: 9px; color: var(--primary); font-weight: 800; letter-spacing: 1px; display: block; margin-bottom: 4px; }
        .track-name { font-size: 24px; font-weight: 800; color: var(--text-main); line-height: 1.1; margin-bottom: 2px;}
        .track-author { font-size: 13px; color: var(--text-muted); }

        /* Visualizador */
        .visualizer-container {
            display: flex; align-items: center; gap: 3px; height: 30px;
            margin: 10px 0; overflow: hidden;
        }
        .bar { width: 4px; background: var(--primary); border-radius: 10px; opacity: 0.6; }

        /* Controles */
        .controls-wrapper {
            background: white; padding: 15px 25px; border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.03); margin-bottom: 20px; flex-shrink: 0;
        }

        .progress-area { width: 100%; margin-bottom: 10px; }
        .progress-bar-bg {
            width: 100%; height: 4px; background: #eee;
            border-radius: 10px; cursor: pointer; position: relative;
        }
        .progress-fill {
            height: 100%; background: var(--primary); width: 0%;
            border-radius: 10px; transition: width 0.1s linear;
        }
        .timestamps { display: flex; justify-content: space-between; font-size: 10px; color: var(--text-muted); margin-top: 6px; font-weight: 600; }

        .buttons-row { display: flex; justify-content: space-between; align-items: center; padding: 0 10px;}
        .control-btn { background: none; border: none; cursor: pointer; font-size: 16px; color: #aaa; transition: 0.2s; }
        .control-btn:hover { color: var(--primary); }
        
        .play-btn-main {
            width: 45px; height: 45px; border-radius: 50%;
            background: var(--primary); color: white; font-size: 16px;
            border: none; cursor: pointer; box-shadow: 0 5px 15px rgba(128, 0, 32, 0.3);
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.2s, background 0.2s;
        }
        .play-btn-main:hover { transform: scale(1.05); background: var(--primary-dark); }

        /* Pesta침as */
        .tabs-header {
            display: flex; gap: 20px; margin-bottom: 10px;
            border-bottom: 1px solid #eee; padding-bottom: 5px;
        }
        .tab-title {
            font-size: 11px; font-weight: 700; color: var(--text-muted);
            cursor: pointer; padding-bottom: 5px; text-transform: uppercase; letter-spacing: 0.5px;
        }
        .tab-title.active { color: var(--primary); border-bottom: 2px solid var(--primary); }

        /* Playlist */
        .playlist-container { flex: 1; padding-right: 5px; margin-bottom: 20px; }
        .playlist-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px; border-radius: 10px; cursor: pointer;
            transition: background 0.2s; margin-bottom: 4px;
        }
        .playlist-item:hover { background: rgba(255,255,255, 0.6); }
        .playlist-item.active { background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.03); }
        .playlist-item.active h4 { color: var(--primary); }
        .pl-info h4 { font-size: 12px; color: var(--text-main); margin-bottom: 2px; }
        .pl-info span { font-size: 9px; color: var(--text-muted); text-transform: uppercase; }
        .pl-duration { font-size: 10px; font-weight: 700; color: var(--text-muted); }

        /* Comentarios */
        .comments-section { margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px; }
        .comments-header { font-size: 12px; font-weight: 700; margin-bottom: 10px; color: var(--text-main); }
        .comment-input-box { display: flex; gap: 10px; margin-bottom: 15px; }
        .comment-input {
            width: 100%; padding: 8px 12px; border-radius: 15px; border: 1px solid #ddd;
            background: rgba(255,255,255,0.5); font-family: 'Manrope', sans-serif; font-size: 11px; outline: none;
        }
        .comment-input:focus { border-color: var(--primary); background: white; }
        .btn-send {
            background: var(--primary); color: white; border: none; border-radius: 12px;
            padding: 0 15px; cursor: pointer; font-size: 10px; font-weight: 700; transition: background 0.2s;
        }
        .btn-send:hover { background: var(--primary-dark); }
        .comments-list { display: flex; flex-direction: column; gap: 10px; }
        .comment-item {
            background: white; padding: 10px; border-radius: 12px;
            font-size: 11px; box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        }
        .comment-user { font-weight: 800; color: var(--primary); margin-right: 5px; font-size: 10px; }
        .comment-time { font-size: 9px; color: var(--text-muted); float: right; }
        .comment-text { display: block; margin-top: 4px; color: var(--text-main); line-height: 1.4; }

        /* Player Responsive */
        @media (max-width: 800px) {
            .main-container { padding-top: 0px; height: auto; display: block;}
            .player-card { flex-direction: column; height: auto; max-width: 100%; border-radius: 0; box-shadow: none; background: transparent;}
            .left-section { width: 100%; height: 300px; border-radius: 0 0 25px 25px; z-index: 1; margin-bottom: -20px; padding-top: 80px; }
            .right-section { width: 100%; background: #fff; border-radius: 25px 25px 0 0; z-index: 2; padding: 20px; }
            .nav-links a { color: white; } /* Fix para menu en header oscuro */
        }
    </style>
</head>
<body>

    <nav>
        <div class="logo">PERFUMMIA.</div>
        <div class="nav-links">
            <a href="index.html">Inicio</a>
            <a href="index.html#historia">Historia</a>
            <a href="index.html#personajes">Personajes</a>
            <a href="https://drive.google.com/file/d/1V3VPm61dQtL0rDu6D1M4zj2KqQkXXmcl/view" class="btn-outline-nav">Dossier</a>
        </div>
    </nav>

    <div class="main-container">
        
        <div class="player-card" id="playerCard">
            
            <div class="left-section">
                <div class="album-header">
                    <div class="tag">Podcast</div>
                    <i class="fa-regular fa-heart" style="color: white; cursor: pointer;"></i>
                </div>

                <div class="art-content">
                    <i class="fa-solid fa-flask big-icon"></i>
                    <h1 class="main-title">Rose</h1>
                    <p class="subtitle">La Doble cara</p>
                </div>
                <div></div> </div>

            <div class="right-section">
                
                <div class="top-nav">
                    <div class="community-stats">
                        <button class="follow-btn" id="followBtn">Seguir</button>
                        <div class="stat-item">
                            <i class="fa-solid fa-user-group"></i>
                            <span id="followerCount">12.4k</span>
                        </div>
                        <div class="stat-item" style="margin-left: 10px;">
                            <i class="fa-solid fa-headphones"></i>
                            <span id="listenerCount">--</span>
                        </div>
                    </div>

                    <div class="nav-icons">
                        <button class="nav-btn"><i class="fa-solid fa-share-nodes"></i></button>
                        <button class="nav-btn"><i class="fa-solid fa-ellipsis"></i></button>
                    </div>
                </div>

                <div class="track-info-container">
                    <span class="current-label">REPRODUCIENDO AHORA</span>
                    <h2 class="track-name" id="trackTitle">...</h2>
                    <p class="track-author">Cr칩nicas de Perfummia</p>
                </div>

                <div class="visualizer-container" id="visualizer"></div>

                <div class="controls-wrapper">
                    <div class="progress-area">
                        <div class="progress-bar-bg" id="progressContainer">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="timestamps">
                            <span id="currentTime">00:00</span>
                            <span id="duration">00:00</span>
                        </div>
                    </div>

                    <div class="buttons-row">
                        <button class="control-btn"><i class="fa-solid fa-shuffle"></i></button>
                        <button class="control-btn" id="prevBtn"><i class="fa-solid fa-backward-step"></i></button>
                        <button class="play-btn-main" id="playBtn"><i class="fa-solid fa-play"></i></button>
                        <button class="control-btn" id="nextBtn"><i class="fa-solid fa-forward-step"></i></button>
                        <button class="control-btn"><i class="fa-solid fa-repeat"></i></button>
                    </div>
                </div>

                <div class="tabs-header">
                    <div class="tab-title active">Episodios</div>
                </div>

                <div class="playlist-container" id="playlistContainer"></div>

                <div class="comments-section">
                    <div class="comments-header">Comentarios del Podcast</div>
                    
                    <div class="comment-input-box">
                        <input type="text" class="comment-input" id="commentInput" placeholder="Escribe tu opini칩n sobre Rose...">
                        <button class="btn-send" id="sendCommentBtn">ENVIAR</button>
                    </div>

                    <div class="comments-list" id="commentsList">
                        <div class="comment-item">
                            <span class="comment-user">@fan_perfummia</span>
                            <span class="comment-time">Hace 2h</span>
                            <span class="comment-text">춰Incre칤ble la historia de Rose!游땸</span>
                        </div>
                        <div class="comment-item">
                            <span class="comment-user">@rose_hater</span>
                            <span class="comment-time">Hace 5h</span>
                            <span class="comment-text">Rose siempre me dio mala espina, qu칠 traici칩n m치s vil.</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <script>
        /* CONFIGURACI칍N DE ARCHIVOS (Puedes cambiar los paths de los audios) */
        const tracks = [
            { 
                title: "1. La Doble Cara de Rose", 
                file: "audio/Anatom칤a_de_la_traici칩n_la_enemiga_칤ntima_Rose.m4a", // Audio demo
                listeners: "5.2k"
            },
           
        ];

        let currentIdx = 0;
        let audioPlayer = new Audio(); 
        
        /* --- L칍GICA SEGUIR / FOLLOW --- */
        const followBtn = document.getElementById('followBtn');
        const followerCountEl = document.getElementById('followerCount');
        let isFollowing = false;
        let followerNum = 12400; // Base 12.4k

        followBtn.addEventListener('click', () => {
            isFollowing = !isFollowing;
            if(isFollowing) {
                followBtn.innerText = "Siguiendo";
                followBtn.classList.add('following');
                followerNum++;
            } else {
                followBtn.innerText = "Seguir";
                followBtn.classList.remove('following');
                followerNum--;
            }
            // Formato simple de n칰mero
            followerCountEl.innerText = (followerNum / 1000).toFixed(1) + 'k';
        });

        /* --- L칍GICA COMENTARIOS --- */
        const commentInput = document.getElementById('commentInput');
        const sendCommentBtn = document.getElementById('sendCommentBtn');
        const commentsList = document.getElementById('commentsList');

        function addComment() {
            const text = commentInput.value.trim();
            if(text === "") return;

            const div = document.createElement('div');
            div.className = 'comment-item';
            div.innerHTML = `
                <span class="comment-user">@tu_usuario</span>
                <span class="comment-time">Ahora mismo</span>
                <span class="comment-text">${text}</span>
            `;
            // A침adir al principio
            commentsList.prepend(div);
            commentInput.value = "";
        }

        sendCommentBtn.addEventListener('click', addComment);
        commentInput.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') addComment();
        });


        /* --- DOM AUDIO ELEMENTS --- */
        const playBtn = document.getElementById('playBtn');
        const icon = playBtn.querySelector('i');
        const visualizer = document.getElementById('visualizer');
        const progressFill = document.getElementById('progressFill');
        const progressContainer = document.getElementById('progressContainer');
        const currTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const trackTitle = document.getElementById('trackTitle');
        const listenerCountEl = document.getElementById('listenerCount');
        const playlistContainer = document.getElementById('playlistContainer');

        /* VISUALIZADOR */
        for(let i=0; i<40; i++){
            let bar = document.createElement('div');
            bar.className = 'bar';
            let randomHeight = Math.floor(Math.random() * 80 + 20);
            bar.style.height = randomHeight + '%';
            visualizer.appendChild(bar);
        }

        /* CARGAR TRACK */
        function loadTrack(idx) {
            currentIdx = idx;
            trackTitle.innerText = tracks[idx].title;
            listenerCountEl.innerText = tracks[idx].listeners; // Actualizar oyentes
            
            audioPlayer.src = tracks[idx].file;
            audioPlayer.load();

            progressFill.style.width = "0%";
            currTimeEl.innerText = "00:00";
            durationEl.innerText = "--:--";

            renderPlaylist();
            
            if(!audioPlayer.paused && audioPlayer.currentTime > 0) {
                playTrack();
            } else {
                updatePlayIcon(false);
            }
        }

        /* PLAYLIST */
        function renderPlaylist() {
            playlistContainer.innerHTML = '';
            tracks.forEach((t, idx) => {
                let div = document.createElement('div');
                div.className = `playlist-item ${idx === currentIdx ? 'active' : ''}`;
                div.onclick = () => {
                    if(idx !== currentIdx) {
                        loadTrack(idx);
                        playTrack(); 
                    }
                };
                div.innerHTML = `
                    <div class="pl-info">
                        <h4>${t.title}</h4>
                        <span>${idx === currentIdx ? 'Reproduciendo' : 'Episodio ' + (idx + 1)}</span>
                    </div>
                    <div class="pl-duration"><i class="fa-solid fa-play"></i></div>
                `;
                playlistContainer.appendChild(div);
            });
        }

        /* CONTROLES AUDIO */
        function togglePlay() {
            if (audioPlayer.paused) playTrack();
            else pauseTrack();
        }

        function playTrack() {
            audioPlayer.play();
            updatePlayIcon(true);
        }

        function pauseTrack() {
            audioPlayer.pause();
            updatePlayIcon(false);
        }

        function updatePlayIcon(isPlaying) {
            if(isPlaying) {
                icon.classList.remove('fa-play');
                icon.classList.add('fa-pause');
            } else {
                icon.classList.remove('fa-pause');
                icon.classList.add('fa-play');
            }
        }

        /* EVENTOS AUDIO */
        audioPlayer.addEventListener('timeupdate', (e) => {
            const { duration, currentTime } = e.srcElement;
            if(isNaN(duration)) return;
            const progressPercent = (currentTime / duration) * 100;
            progressFill.style.width = `${progressPercent}%`;
            currTimeEl.innerText = formatTime(currentTime);
        });

        audioPlayer.addEventListener('loadedmetadata', () => {
            durationEl.innerText = formatTime(audioPlayer.duration);
        });

        audioPlayer.addEventListener('ended', nextTrack);

        function formatTime(seconds) {
            let min = Math.floor(seconds / 60);
            let sec = Math.floor(seconds % 60);
            if(sec < 10) sec = `0${sec}`;
            return `${min}:${sec}`;
        }

        function nextTrack() {
            let next = (currentIdx + 1) % tracks.length;
            loadTrack(next);
            playTrack();
        }

        function prevTrack() {
            let prev = (currentIdx - 1 + tracks.length) % tracks.length;
            loadTrack(prev);
            playTrack();
        }

        progressContainer.addEventListener('click', (e) => {
            const width = progressContainer.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration;
            audioPlayer.currentTime = (clickX / width) * duration;
        });

        playBtn.addEventListener('click', togglePlay);
        document.getElementById('nextBtn').addEventListener('click', nextTrack);
        document.getElementById('prevBtn').addEventListener('click', prevTrack);

        /* INICIALIZAR */
        loadTrack(0);
    </script>
</body>
</html>